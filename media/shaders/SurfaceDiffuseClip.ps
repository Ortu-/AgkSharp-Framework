uniform sampler2D texDiffuse; //0

varying highp vec3 posVarying;
varying mediump vec3 normalVarying;
varying mediump vec3 lightVarying;
varying mediump vec2 uvVarying;

mediump vec3 GetPSLighting( mediump vec3 normal, highp vec3 pos );

void main()
{
	mediump vec3 norm = normalize(normalVarying);
	mediump vec3 light = lightVarying + GetPSLighting( norm, posVarying );
	mediump vec3 color = texture2D(texDiffuse, uvVarying).rgb * light;
	if (texture2D(texDiffuse, uvVarying).a < 0.5) discard;
	gl_FragColor = vec4(color, 1.0);
}